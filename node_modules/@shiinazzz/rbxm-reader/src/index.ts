import ByteReader from "./ByteReader"
import BinaryParser from "./BinaryParser"

export function parseBuffer(buffer: ArrayBuffer) {
    const reader = new ByteReader(buffer)
    if (reader.String(7) !== "<roblox") {
        throw new Error("Not a valid RBXM file");
    }

    if(reader.Byte() === 0x21) {
        return BinaryParser.parse(buffer);
    }

    throw new Error("XML not supported.");
}